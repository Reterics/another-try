<style>
/* Scoped HUD styles based on test.html */
#inGame {
  --panel: rgba(15, 23, 42, 0.88);
  --panel-soft: rgba(15, 23, 42, 0.72);
  --accent: #38bdf8;
  --accent-soft: rgba(56, 189, 248, 0.18);
  --text-main: #f9fafb;
  --text-muted: #9ca3af;
  --danger: #ef4444;
  --stamina: #22c55e;
  --border-subtle: rgba(148, 163, 184, 0.28);
  --shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.55);
  --radius-lg: 14px;
  --radius-sm: 8px;
  --hud-gap: 10px;
}

#inGame, #inGame * { box-sizing: border-box; }

#inGame .hud-layer {
  position: absolute;
  inset: 0;
  z-index: 12;
  pointer-events: none;
  padding: 10px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  color: var(--text-main);
}

#inGame .hud-top-row, #inGame .hud-bottom-row {
  display: flex;
  justify-content: space-between;
  gap: var(--hud-gap);
}
#inGame .hud-left-stack, #inGame .hud-right-stack { display:flex; flex-direction:column; gap: var(--hud-gap); max-width:33%; }

/* Player panel */
#inGame .player-panel {
  pointer-events: none;
  background: var(--panel-soft);
  padding: 8px 12px;
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-subtle);
  min-width: 220px; max-width: 280px;
  box-shadow: var(--shadow-soft);
}
#inGame .player-header { display:flex; justify-content:space-between; align-items:baseline; margin-bottom:6px; }
#inGame .player-name { font-size:14px; font-weight:500; }
#inGame .player-level { font-size:11px; color: var(--text-muted); text-transform: uppercase; letter-spacing:0.09em; }
#inGame .stat-row { margin-bottom: 4px; }
#inGame .stat-label { font-size:10px; text-transform:uppercase; letter-spacing:0.12em; color: var(--text-muted); margin-bottom:2px; }
#inGame .stat-bar { position:relative; height:8px; border-radius:999px; background: rgba(15,23,42,0.9); overflow:hidden; border: 1px solid rgba(31,41,55,0.9); }
#inGame .stat-bar-fill { position:absolute; inset:0; border-radius:inherit; transform-origin:left center; }
#inGame .stat-bar-fill.health { background: linear-gradient(90deg, #b91c1c, var(--danger)); }
#inGame .stat-bar-fill.stamina { background: linear-gradient(90deg, #15803d, var(--stamina)); }
#inGame .stat-values { margin-top: 1px; font-size:10px; color: var(--text-muted); display:flex; justify-content:space-between; }
#inGame #HUD-information { margin-top:6px; font-size:11px; color: var(--text-muted); }

/* Minimap */
#inGame .minimap-wrapper { pointer-events:auto; display:flex; justify-content:flex-end; }
#inGame .minimap { width:140px; height:140px; border-radius:999px; border:2px solid rgba(148,163,184,0.75); background: radial-gradient(circle at 40% 35%, #1e293b, #020617); box-shadow: var(--shadow-soft); position:relative; overflow:hidden; pointer-events:auto; }
#inGame .minimap-inner-border { position:absolute; inset:5px; border-radius:inherit; border:1px solid rgba(148,163,184,0.35); }
#inGame .minimap-indicator { position:absolute; top:50%; left:50%; width:8px; height:8px; background: var(--accent); border-radius:999px; transform: translate(-50%, -50%); box-shadow: 0 0 12px rgba(56,189,248,0.8); }
#inGame .minimap-heading { position:absolute; top:6px; left:50%; transform: translateX(-50%); font-size:10px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.18em; }
#inGame .minimap-controls { position:absolute; display:flex; gap:6px; top: 129px; pointer-events:auto; }
#inGame .minimap-zoom { width:26px; height:26px; border-radius:999px; border:1px solid rgba(55,65,81,0.9); background: radial-gradient(circle at 20% 0%, #0b1120, #020617 60%); color: var(--text-main); font-size:16px; line-height:1; display:flex; align-items:center; justify-content:center; box-shadow: 0 6px 16px rgba(0,0,0,0.45); cursor:pointer; padding:0; }
#inGame .minimap-zoom:hover { border-color: var(--accent); box-shadow: 0 0 0 1px rgba(56,189,248,0.35), 0 6px 16px rgba(0,0,0,0.45); }
#inGame .minimap-zoom:active { transform: translateY(1px); }
#inGame .minimap .zoom-in, #inGame .minimap .zoom-out { pointer-events:auto; }

/* Messages */
#inGame .message-panel { pointer-events:none; flex:1; max-width:380px; min-width:280px; background: var(--panel-soft); border-radius: var(--radius-lg); border: 1px solid rgba(31,41,55,0.9); padding: 8px 10px; box-shadow: var(--shadow-soft); display:flex; flex-direction:column; max-height:160px; }
#inGame .message-header { font-size:11px; color: var(--text-muted); text-transform:uppercase; letter-spacing:0.12em; border-bottom:1px solid rgba(31,41,55,0.9); padding-bottom:4px; margin-bottom:4px; }
#inGame .message-list { flex:1; overflow:hidden; display:flex; flex-direction:column-reverse; gap:2px; font-size:11px; line-height:1.4; color: var(--text-main); }
#inGame #messageInput { display:none; font-size:12px; color:var(--text-main); }

/* Skill bar (also acts as side-buttons) */
#inGame .skill-bar.side-buttons { align-self: self-end; height: fit-content; pointer-events:none; display:inline-flex; gap:6px; padding:6px 10px; align-items:center; justify-content:center; min-width:260px; }
#inGame .skill-slot.side-button { width:44px; height:44px; border-radius:12px; border:1px solid rgba(55,65,81,0.9); background: radial-gradient(circle at 20% 0%, #0b1120, #020617 60%); position:relative; overflow:hidden; display:flex; align-items:center; justify-content:center; font-size:18px; color: var(--text-main); }
#inGame .skill-key { position:absolute; top:3px; left:4px; font-size:10px; color: var(--text-muted); background: rgba(15,23,42,0.88); padding:1px 4px; border-radius:999px; border:1px solid rgba(31,41,55,0.9); text-transform:uppercase; letter-spacing:0.08em; }
#inGame .skill-cooldown { position:absolute; inset:0; background: linear-gradient(to top, rgba(15,23,42,0.85), transparent 60%); opacity:0; pointer-events:none; }
#inGame .skill-slot.side-button.selected, #inGame .skill-slot.side-button.active { border-color: var(--accent); box-shadow: 0 0 0 1px rgba(56,189,248,0.4); }

/* Debug panel */
#inGame .debug-panel, #inGame #HUD-stats { pointer-events:none; align-self:flex-end; background: rgba(15,23,42,0.88); padding:6px 8px; border-radius: var(--radius-sm); border:1px solid rgba(55,65,81,0.95); font-size:11px; color: var(--text-muted); min-width:150px; max-width:220px; }

#inGame #HUD-footer { pointer-events:none; font-size:11px; color: var(--text-muted); align-self:flex-end; }

/* Responsive */
@media (max-width: 900px) {
  #inGame .hud-left-stack, #inGame .hud-right-stack { max-width:48%; }
  #inGame .minimap { width:120px; height:120px; }
}
@media (max-width: 700px) {
  #inGame .hud-top-row { flex-direction:column; align-items:flex-start; }
  #inGame .hud-left-stack, #inGame .hud-right-stack { max-width:100%; }
  #inGame .hud-bottom-row { flex-direction:column-reverse; align-items:center; }
  #inGame .message-panel { max-width:100%; }
}
@media (max-width: 480px) {
  #inGame .skill-slot.side-button { width:38px; height:38px; }
  #inGame .skill-bar.side-buttons { min-width:0; }
  #inGame .player-panel { min-width:0; width:100%; }
}
</style>

<div class="hud-layer">
  <!-- TOP ROW -->
  <div class="hud-top-row">
    <div class="hud-left-stack">
      <!-- Player stats -->
      <div class="player-panel">
        <div class="player-header">
          <div class="player-name" id="HUD-player-name"></div>
          <div class="player-level" id="HUD-player-level"></div>
        </div>
      <div class="stat-row">
          <div class="stat-label">Health</div>
          <div class="stat-bar">
            <div class="stat-bar-fill health" id="HUD-health-bar" style="transform: scaleX(1);"></div>
          </div>
          <div class="stat-values">
            <span id="HUD-health-text"></span>
            <span id="HUD-health-rate"></span>
          </div>
        </div>
        <div class="stat-row">
          <div class="stat-label">Stamina</div>
          <div class="stat-bar">
            <div class="stat-bar-fill stamina" id="HUD-stamina-bar" style="transform: scaleX(1);"></div>
          </div>
          <div class="stat-values">
            <span id="HUD-stamina-text"></span>
            <span id="HUD-stamina-rate"></span>
          </div>
        </div>
        <div id="HUD-information"></div>
        <div style="display:none">
          <progress id="HUD-energy" value="0" max="20">0%</progress>
        </div>
      </div>

      <!-- Debug / Stats -->
      <div id="HUD-stats" class="debug-panel"></div>
    </div>

    <!-- TOP-RIGHT: minimap (created via MinimapDom in TS) -->
    <div class="hud-right-stack"></div>
  </div>

  <!-- BOTTOM ROW -->
  <div class="hud-bottom-row">
    <!-- BOTTOM-LEFT: message panel -->
    <div class="message-panel">
      <div class="message-header">Messages</div>
      <div class="message-list" id="messageList"></div>
      <div id="typedMessage">
        <div id="messageInput"></div>
      </div>
    </div>

    <!-- BOTTOM-CENTER: skill bar mapped to side-buttons -->
    <div class="skill-bar side-buttons">
      <div class="skill-slot side-button selected" data-active="pointer" title="Pointer">
        <span class="skill-key">1</span>
        <img src="/cursor.svg" alt="Pointer" width="22" height="22" />
        <div class="skill-cooldown"></div>
      </div>
      <div class="skill-slot side-button" data-active="far" title="Far">
        <span class="skill-key">2</span>
        <img src="/binoculars.svg" alt="Far" width="22" height="22" />
        <div class="skill-cooldown" style="opacity:0.55;"></div>
      </div>
      <div class="skill-slot side-button" data-active="size" title="Size">
        <span class="skill-key">3</span>
        <img src="/box.svg" alt="Size" width="22" height="22" />
        <div class="skill-cooldown"></div>
      </div>
      <div class="skill-slot side-button" data-active="precision" title="Precision">
        <span class="skill-key">4</span>
        <img src="/border-style.svg" alt="Precision" width="22" height="22" />
        <div class="skill-cooldown"></div>
      </div>
    </div>

    <!-- BOTTOM-RIGHT: footer info -->
    <div style="pointer-events:none; display:flex; align-items:flex-end; justify-content:flex-end; width: 380px">
      <div id="HUD-footer"></div>
    </div>
  </div>
</div>
